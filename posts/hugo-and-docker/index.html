<!doctype html><html lang=en><head><title>Hugo and Docker · @natenatters</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;"><meta name=author content="@natenatters"><meta name=description content="How to quickly and simply use Docker locally for your Hugo site!"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo and Docker"><meta name=twitter:description content="How to quickly and simply use Docker locally for your Hugo site!"><meta property="og:title" content="Hugo and Docker"><meta property="og:description" content="How to quickly and simply use Docker locally for your Hugo site!"><meta property="og:type" content="article"><meta property="og:url" content="https://natenatters.dev/posts/hugo-and-docker/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-31T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-31T00:00:00+00:00"><link rel=canonical href=https://natenatters.dev/posts/hugo-and-docker/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=stylesheet href=/custom.min.85f403ff232218bd8e612424d1885bb4d57fd440764fa75faecb6ceb511c75b4.css integrity="sha256-hfQD/yMiGL2OYSQk0YhbtNV/1EB2T6dfrsts61EcdbQ=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.103.1"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>@natenatters</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://natenatters.dev/posts/hugo-and-docker/>Hugo and Docker</a></h1></div></header><div><p>tldr; Run this command in your project root:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker run --rm -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:0.101.0 server
</span></span></code></pre></div><h3 id=whoa-what-is-that>Whoa?! What is that?
<a class=heading-link href=#whoa-what-is-that><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Good question! Carry on reading to find out!</p><p>A quick disclaimer: This is a beginner guide to using Docker to develop your Hugo site. If you want a more detailed example, please let me know <a href=https://twitter.com/natenatters>@natenatters</a> and I can make one!</p><h3 id=what-will-we-learn>What will we learn?
<a class=heading-link href=#what-will-we-learn><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>What you need to run Docker</li><li>How to run commands on a Docker container</li><li>How to change the image you are running</li></ul><h3 id=lets-follow-the-quick-start-guide>Let&rsquo;s follow the quick start guide
<a class=heading-link href=#lets-follow-the-quick-start-guide><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>As Hugo has a great quick-start guide, I want to recreate those steps and inject Docker where appropriate.</p><div class="notice info"><div class=notice-title><i class="fa fa-exclamation-circle" aria-hidden=true></i>Info</div><div class=notice-content>Open the Hugo &ldquo;<a href=https://gohugo.io/getting-started/quick-start/>Quick Start</a>&rdquo; guide to compare with the steps here!</div></div><h3 id=pre-requisites>Pre-requisites
<a class=heading-link href=#pre-requisites><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>First, we need to install a tool to run Docker locally. I use macOS and <a href=https://www.docker.com/products/docker-desktop/>Docker Desktop</a>.</p><p>Install that and have it running in the background. You will know it&rsquo;s running if you have this in your top menu bar:</p><p><img src=/images/posts/hugo-and-docker/docker-running-in-menu-bar.png alt="Docker running in the maOS menu bar"></p><h3 id=step-1-install-hugo>Step 1: Install Hugo
<a class=heading-link href=#step-1-install-hugo><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Instead of installing <code>hugo</code> with a macOS package manager like <code>Homebrew</code> or <code>MacPorts</code>, we install a Docker container that has <code>hugo</code> pre-installed.</p><div class="notice note"><div class=notice-title><i class="fa fa-sticky-note" aria-hidden=true></i>Note</div><div class=notice-content>For a simple project like a Hugo site, we don&rsquo;t need custom Docker containers. I will be using an open-source container: <a href=https://hub.docker.com/r/klakegg/hugo><code>klakegg/hugo</code></a>.</div></div><p>So, let&rsquo;s download it:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker pull klakegg/hugo:0.101.0
</span></span></code></pre></div><p>At this point, nothing is installed, we just have a copy of an operating system that has <code>hugo</code> installed.</p><p>To run a <code>hugo</code> command, we need to run the container and tell is the <code>hugo</code> command we want.</p><p>So, let&rsquo;s verify it&rsquo;s working by asking for the <code>hugo</code> version:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker run --rm -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:0.101.0 version
</span></span></code></pre></div><p>For now, let&rsquo;s focus on the last two arguments of this command:</p><ul><li><code>klakegg/hugo:0.101.0</code> - This is the name of the <code>docker-image:image-tag</code></li><li><code>version</code> - Anything at the end is executed after the <code>hugo</code> command.</li></ul><p>This command runs <code>hugo version</code> and outputs something like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>hugo v0.101.0 linux/amd64 BuildDate=2022-06-16T07:09:16Z VendorInfo=gohugoio
</span></span></code></pre></div><h3 id=step-2-create-a-new-site>Step 2: Create a New Site
<a class=heading-link href=#step-2-create-a-new-site><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Let&rsquo;s try another <code>hugo</code> command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker run --rm -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:0.101.0 new site quickstart
</span></span></code></pre></div><p>The above will create a new Hugo site in a folder named <code>quickstart</code>.</p><p>Notice how we now have 3 keywords at the end of the command (<code>new</code> <code>site</code> <code>quickstart</code>).</p><p>So, this command runs <code>hugo new site quickstart</code>.</p><p>Now, even though the command is executed on our cool Docker container, it will create the site files in your local directory!</p><h3 id=step-3-add-a-theme>Step 3: Add a Theme
<a class=heading-link href=#step-3-add-a-theme><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Use the original guide. Nothing to learn here about Docker.</p><div class="notice info"><div class=notice-title><i class="fa fa-exclamation-circle" aria-hidden=true></i>Info</div><div class=notice-content>I try to keep tools on my Docker images, but macOS comes with Git, so I don&rsquo;t include it.</div></div><h3 id=step-4-add-some-content>Step 4: Add Some Content
<a class=heading-link href=#step-4-add-some-content><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Let&rsquo;s run one more <code>hugo</code> command.</p><p>You can manually create content files (for example as content//.) and provide metadata in them, however you can use the new command to do a few things for you (like add title and date):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker run --rm -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:0.101.0 new posts/my-first-post.md
</span></span></code></pre></div><p>Again, we use the same Docker command and append the <code>hugo</code> command from the guide.</p><p>Then you can follow the original guide on how to edit the new page.</p><h3 id=step-5-start-the-hugo-server>Step 5: Start the Hugo server
<a class=heading-link href=#step-5-start-the-hugo-server><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Now, start the Hugo server.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker run --rm -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:0.101.0 server -D
</span></span></code></pre></div><p>Navigate to your new site at <a href=http://localhost:1313>http://localhost:1313</a>.</p><p><img src=/images/posts/hugo-and-docker/great-success.webp alt="Great success"></p><p>And to stop the server, press <code>Ctrl+C</code>.</p><h3 id=step-6-customize-the-theme>Step 6: Customize the Theme
<a class=heading-link href=#step-6-customize-the-theme><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Use the original guide. Nothing to learn here about Docker.</p><h3 id=step-7-build-static-pages>Step 7: Build static pages
<a class=heading-link href=#step-7-build-static-pages><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>OK, let&rsquo;s test what you have learnt!</p><p>The goal of this step is to run <code>hugo -D</code>. Try to figure out the command using Docker.</p><p>If you figure it out, I would love to know. Send me a message <a href=https://twitter.com/natenatters>@natenatters</a>!</p><h2 id=issues-gotchas>Issues/ Gotchas
<a class=heading-link href=#issues-gotchas><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>Livereloading has crashed once when I created a new layout override. But I just stopped and started the server again.</li><li>My theme uses SCSS, but <code>klakegg/hugo:0.101.0</code> doesn&rsquo;t include any tools for PostCSS. Luckily, there is an extended image that includes more tools, so replace the image in our Docker command from <code>klakegg/hugo:0.101.0</code> to <code>klakegg/hugo:0.101.0-ext-alpine</code>.</li></ul><h2 id=conclusion>Conclusion
<a class=heading-link href=#conclusion><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>I wanted to show people how easy it is to use Docker for local development, and my Hugo site was a great, simple example.</p><p>If you are a Docker novice, I hope you are leaving here with more confidence to explore the other parts Docker has to offer and try it out on a more complex project of yours.</p><p>In the future, I will likely use Docker for other projects, but my default is docker-compose with a base image and install exactly what I need.</p><h3 id=outro>Outro
<a class=heading-link href=#outro><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>This blog is to help me remember what I have done, hopefully teach others and get feedback and learn from others.</p></blockquote><blockquote><p>Please let me know if you have tried this, or have any different thoughts on Twitter <a href=https://twitter.com/natenatters/>@natenatters</a>.</p></blockquote></div><footer></footer></article></section></div><footer class=footer><section class=container>©
1991 -
2022
@natenatters
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script></body></html>